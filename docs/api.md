## [Назад в README.md](../README.md)
# API
### Непонимание
> Безопасное использование API (например, через аутентификацию).
- Реализовал API с аутентификацией только на запросах которые требуют авторизацию на сайте, возможно имелось виду сделать защиту API каким нибудь токеном для администратора, оставлю так
### Регистрация пользователя
- URL: **/auth/register/**
- Метод: **POST**
- Описание: Регистрирует нового пользователя.
- Параметры:
```sh
{
    username: "username"
    password: "password"
}
```
- Ответ: Токен авторизации для нового пользователя.
```sh
{
    "token": "token"
}
```
- Использование токена: Токен передается в заголовке запроса для авторизованных действий через заголовок Authorization
```sh
Authorization: Token <token>
```

### Авторизация пользователя
- URL: **/auth/login/**
- Метод: **POST**
- Описание: Авторизует пользователя по логину и паролю.
- Параметры:
```sh
{
    username: "username"
    password: "password"
}
```
- Ответ: Токен авторизации для пользователя.
```sh
{
    "token": "token"
}
```
- Использование токена: Токен передается в заголовке запроса для авторизованных действий через заголовок Authorization
```sh
Authorization: Token <token>
```

### Получение списка автомобилей
- URL: **/api/cars/**
- Метод: **GET**
- Описание: Возвращает список всех автомобилей.
- Ответ: Список автомобилей в формате JSON.
```sh
[
  {
    "id": 2,
    "make": "Toyota",
    "model": "Camry",
    "year": 2021,
    "description": "Компактный седан с отличной экономией топлива\r\nи современными технологиями безопасности.",
    "created_at": "2025-01-08T21:31:14.932027Z",
    "updated_at": "2025-01-08T21:48:57.384263Z",
    "owner": {
      "id": 1,
      "username": "admin",
      "email": "test@test.com"
    }
  }
]
```

### Создание нового автомобиля
- URL: **/api/cars/**
- Метод: **POST**
- Описание: Создает новый автомобиль.
- Заголовки:
```sh
Authorization: Token <token>
```
- Параметры:
```sh
{
  name: Название автомобиля
  model: Модель автомобиля
  year: Год выпуска
  description: Описание автомобиля
}
```
- Ответ: Информация о созданном автомобиле.
```sh
{
  "id": 15,
  "make": "Toyota",
  "model": "Camry",
  "year": 2020,
  "description": "Компактный седан с хорошей экономией топлива",
  "created_at": "2025-01-09T08:13:55.111865Z",
  "updated_at": "2025-01-09T08:13:55.111865Z",
  "owner": {
    "id": 3,
    "username": "admin",
    "email": "test@test.com"
  }
}
```

### Получение информации об автомобиле
- URL: **/api/cars/id/**
- Метод: **GET**
- Описание: Получает информацию о конкретном автомобиле по ID.
- Ответ: Информация о выбранном автомобиле.
```sh
{
  "id": 2,
  "make": "Toyota",
  "model": "Camry",
  "year": 2021,
  "description": "Компактный седан с отличной экономией топлива\r\nи современными технологиями безопасности.",
  "created_at": "2025-01-08T21:31:14.932027Z",
  "updated_at": "2025-01-08T21:48:57.384263Z",
  "owner": {
    "id": 1,
    "username": "admin",
    "email": "test@test.com"
  }
}
```

### Обновление информации об автомобиле
- URL: **/api/cars/id/**
- Метод: **PUT**
- Описание: Обновляет информацию о конкретном автомобиле.
- Заголовки:
```sh
Authorization: Token <token>
```
- Параметры: Обновленные данные автомобиля.
- Ответ: Информация об обновленном автомобиле.
```sh
{
  "id": 2,
  "make": "Toyota",
  "model": "Camry",
  "year": 2020,
  "description": "Компактный седан с хорошей экономией топлива",
  "created_at": "2025-01-08T21:31:14.932027Z",
  "updated_at": "2025-01-09T09:47:54.413576Z",
  "owner": {
    "id": 1,
    "username": "admin",
    "email": "test@test.com"
  }
}
```

### Удаление автомобиля
- URL: **/api/cars/id/**
- Метод: **DELETE**
- Описание: Удаляет автомобиль.
- Заголовки:
```sh
Authorization: Token <token>
```
- Ответ: Сообщение о статусе удаления.
```sh
{
  "detail": "Автомобиль удален."
}
```
### Получение списка комментариев
- URL: **/api/cars/id/comments/**
- Метод: **GET**
- Описание: Получает все комментарии к конкретному автомобилю.
- Ответ: Список комментариев для автомобиля.
```sh
[
  {
    "id": 6,
    "content": "Согласен, но чёт он какой-то маленький",
    "created_at": "2025-01-08T22:16:45.577025Z",
    "car": 6,
    "author": "Alex"
  }
]
```
### Добавление комментария
- URL: **/api/cars/id/comments/**
- Метод: **POST**
- Описание: Добавляет новый комментарий к автомобилю.
- Заголовки:
```sh
Authorization: Token <token>
```
- Параметры:
```sh
{
	content: "Текст комментария"
}
```
- Ответ: Данные о новом комментарии.
```sh
{
  "id": 10,
  "content": "Лучший автомобиль",
  "created_at": "2025-01-09T10:08:20.700543Z",
  "car": 6,
  "author": "admin"
}
```
